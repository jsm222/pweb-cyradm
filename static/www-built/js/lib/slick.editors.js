(function(e,g){"function"===typeof define&&define.amd?define(["jquery","./slick.core","select2"],g):e.Slick.Editors=g(e.jQuery)})(this,function(e,g){function h(c){function a(){var a=c.column.editorFixedDecimalPlaces;"undefined"==typeof a&&(a=h.DefaultDecimalPlaces);return a||0===a?a:null}var b,d;this.init=function(){b=e("\x3cINPUT type\x3dtext class\x3d'editor-text' /\x3e");b.bind("keydown.nav",function(a){a.keyCode!==e.ui.keyCode.LEFT&&a.keyCode!==e.ui.keyCode.RIGHT||a.stopImmediatePropagation()});
b.appendTo(c.container);b.focus().select()};this.destroy=function(){b.remove()};this.focus=function(){b.focus()};this.loadValue=function(f){d=f[c.column.field];f=a();null!==f&&(d||0===d)&&d.toFixed&&(d=d.toFixed(f));b.val(d);b[0].defaultValue=d;b.select()};this.serializeValue=function(){var d=parseFloat(b.val())||0,c=a();null!==c&&(d||0===d)&&d.toFixed&&(d=parseFloat(d.toFixed(c)));return d};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return!(""==b.val()&&null==
d)&&b.val()!=d};this.validate=function(){if(isNaN(b.val()))return{valid:!1,msg:"Please enter a valid number"};if(c.column.validator){var a=c.column.validator(b.val());if(!a.valid)return a}return{valid:!0,msg:null}};this.init()}e.extend(!0,g,{Editors:{Text:function(c){var a,b;this.init=function(){a=e("\x3cINPUT type\x3dtext class\x3d'editor-text' /\x3e").appendTo(c.container).bind("keydown.nav",function(a){a.keyCode!==e.ui.keyCode.LEFT&&a.keyCode!==e.ui.keyCode.RIGHT||a.stopImmediatePropagation()}).focus().select()};
this.destroy=function(){a.remove()};this.focus=function(){a.focus()};this.getValue=function(){return a.val()};this.setValue=function(b){a.val(b)};this.loadValue=function(d){b=d[c.column.field]||"";a.val(b);a[0].defaultValue=b;a.select()};this.serializeValue=function(){return a.val()};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return!(""==a.val()&&null==b)&&a.val()!=b};this.validate=function(){if(c.column.validator){var b=c.column.validator(a.val());if(!b.valid)return b}return{valid:!0,
msg:null}};this.init()},Integer:function(c){var a,b;this.init=function(){a=e("\x3cINPUT type\x3dtext class\x3d'editor-text' /\x3e");a.bind("keydown.nav",function(a){a.keyCode!==e.ui.keyCode.LEFT&&a.keyCode!==e.ui.keyCode.RIGHT||a.stopImmediatePropagation()});a.appendTo(c.container);a.focus().select()};this.destroy=function(){a.remove()};this.focus=function(){a.focus()};this.loadValue=function(d){b=d[c.column.field];a.val(b);a[0].defaultValue=b;a.select()};this.serializeValue=function(){return parseInt(a.val(),
10)||0};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return!(""==a.val()&&null==b)&&a.val()!=b};this.validate=function(){if(isNaN(a.val()))return{valid:!1,msg:"Please enter a valid integer"};if(c.column.validator){var b=c.column.validator(a.val());if(!b.valid)return b}return{valid:!0,msg:null}};this.init()},Float:h,Date:function(c){var a,b,d=!1;this.init=function(){a=e("\x3cINPUT type\x3dtext class\x3d'editor-text' /\x3e");a.appendTo(c.container);a.focus().select();
a.datepicker({showOn:"button",buttonImageOnly:!0,buttonImage:"../images/calendar.gif",beforeShow:function(){d=!0},onClose:function(){d=!1}});a.width(a.width()-18)};this.destroy=function(){e.datepicker.dpDiv.stop(!0,!0);a.datepicker("hide");a.datepicker("destroy");a.remove()};this.show=function(){d&&e.datepicker.dpDiv.stop(!0,!0).show()};this.hide=function(){d&&e.datepicker.dpDiv.stop(!0,!0).hide()};this.position=function(a){d&&e.datepicker.dpDiv.css("top",a.top+30).css("left",a.left)};this.focus=
function(){a.focus()};this.loadValue=function(d){b=d[c.column.field];a.val(b);a[0].defaultValue=b;a.select()};this.serializeValue=function(){return a.val()};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return!(""==a.val()&&null==b)&&a.val()!=b};this.validate=function(){if(c.column.validator){var b=c.column.validator(a.val());if(!b.valid)return b}return{valid:!0,msg:null}};this.init()},YesNoSelect:function(c){var a,b;this.init=function(){a=e("\x3cSELECT tabIndex\x3d'0' class\x3d'editor-yesno'\x3e\x3cOPTION value\x3d'yes'\x3eYes\x3c/OPTION\x3e\x3cOPTION value\x3d'no'\x3eNo\x3c/OPTION\x3e\x3c/SELECT\x3e");
a.appendTo(c.container);a.focus()};this.destroy=function(){a.remove()};this.focus=function(){a.focus()};this.loadValue=function(d){a.val((b=d[c.column.field])?"yes":"no");a.select()};this.serializeValue=function(){return"yes"==a.val()};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return a.val()!=b};this.validate=function(){return{valid:!0,msg:null}};this.init()},Checkbox:function(c){var a,b;this.init=function(){a=e("\x3cINPUT type\x3dcheckbox value\x3d'true' class\x3d'editor-checkbox' hideFocus\x3e");
a.appendTo(c.container);a.focus()};this.destroy=function(){a.remove()};this.focus=function(){a.focus()};this.loadValue=function(d){(b=!!d[c.column.field])?a.prop("checked",!0):a.prop("checked",!1)};this.serializeValue=function(){return a.prop("checked")};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return this.serializeValue()!==b};this.validate=function(){return{valid:!0,msg:null}};this.init()},PercentComplete:function(c){var a,b,d;this.init=function(){a=e("\x3cINPUT type\x3dtext class\x3d'editor-percentcomplete' /\x3e");
a.width(e(c.container).innerWidth()-25);a.appendTo(c.container);b=e("\x3cdiv class\x3d'editor-percentcomplete-picker' /\x3e").appendTo(c.container);b.append("\x3cdiv class\x3d'editor-percentcomplete-helper'\x3e\x3cdiv class\x3d'editor-percentcomplete-wrapper'\x3e\x3cdiv class\x3d'editor-percentcomplete-slider' /\x3e\x3cdiv class\x3d'editor-percentcomplete-buttons' /\x3e\x3c/div\x3e\x3c/div\x3e");b.find(".editor-percentcomplete-buttons").append("\x3cbutton val\x3d0\x3eNot started\x3c/button\x3e\x3cbr/\x3e\x3cbutton val\x3d50\x3eIn Progress\x3c/button\x3e\x3cbr/\x3e\x3cbutton val\x3d100\x3eComplete\x3c/button\x3e");
a.focus().select();b.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:d,slide:function(b,c){a.val(c.value)}});b.find(".editor-percentcomplete-buttons button").bind("click",function(c){a.val(e(this).attr("val"));b.find(".editor-percentcomplete-slider").slider("value",e(this).attr("val"))})};this.destroy=function(){a.remove();b.remove()};this.focus=function(){a.focus()};this.loadValue=function(b){a.val(d=b[c.column.field]);a.select()};this.serializeValue=function(){return parseInt(a.val(),
10)||0};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return!(""==a.val()&&null==d)&&(parseInt(a.val(),10)||0)!=d};this.validate=function(){return isNaN(parseInt(a.val(),10))?{valid:!1,msg:"Please enter a valid positive number"}:{valid:!0,msg:null}};this.init()},LongText:function(c){var a,b,d,f=this;this.init=function(){var d=e("body");b=e("\x3cDIV style\x3d'z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/\x3e").appendTo(d);
a=e("\x3cTEXTAREA hidefocus rows\x3d5 style\x3d'backround:white;width:250px;height:80px;border:0;outline:0'\x3e").appendTo(b);e("\x3cDIV style\x3d'text-align:right'\x3e\x3cBUTTON\x3eSave\x3c/BUTTON\x3e\x3cBUTTON\x3eCancel\x3c/BUTTON\x3e\x3c/DIV\x3e").appendTo(b);b.find("button:first").bind("click",this.save);b.find("button:last").bind("click",this.cancel);a.bind("keydown",this.handleKeyDown);f.position(c.position);a.focus().select()};this.handleKeyDown=function(a){a.which==e.ui.keyCode.ENTER&&a.ctrlKey?
f.save():a.which==e.ui.keyCode.ESCAPE?(a.preventDefault(),f.cancel()):a.which==e.ui.keyCode.TAB&&a.shiftKey?(a.preventDefault(),c.grid.navigatePrev()):a.which==e.ui.keyCode.TAB&&(a.preventDefault(),c.grid.navigateNext())};this.save=function(){c.commitChanges()};this.cancel=function(){a.val(d);c.cancelChanges()};this.hide=function(){b.hide()};this.show=function(){b.show()};this.position=function(a){b.css("top",a.top-5).css("left",a.left-5)};this.destroy=function(){b.remove()};this.focus=function(){a.focus()};
this.loadValue=function(b){a.val(d=b[c.column.field]);a.select()};this.serializeValue=function(){return a.val()};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return!(""==a.val()&&null==d)&&a.val()!=d};this.validate=function(){if(c.column.validator){var b=c.column.validator(a.val());if(!b.valid)return b}return{valid:!0,msg:null}};this.init()},FileSizeEditor:function(c){var a;this.init=function(){a=e("\x3cINPUT type\x3dtext class\x3d'editor-text' /\x3e").appendTo(c.container).bind("keydown.nav",
function(a){a.keyCode!==e.ui.keyCode.LEFT&&a.keyCode!==e.ui.keyCode.RIGHT||a.stopImmediatePropagation()}).focus().select()};this.destroy=function(){a.remove()};this.focus=function(){a.focus()};this.getValue=function(){return a.val()};this.setValue=function(b){a.val(b)};this.loadValue=function(b){b=b[c.column.field]||"";b=Number(b);var d=["KB","MB","GB","TB","PB"],e=0;if(0===b)b="0 KB";else{for(;1024<=b;)e++,b/=1024;b=Number(b)+" "+d[e]}a.val(b);a[0].defaultValue=b;a.select();return b};this.serializeValue=
function(){var b,c=a.val();if(b=c.match(new RegExp(/(^\d+(\.\d+)?)(\s+)?(KB|MB|GB|TB|PB)/i))){switch(b[4].toUpperCase()){case "KB":c=Number(1024*b[1]);break;case "MB":c=Number(b[1]*Math.pow(1024,2));break;case "GB":c=Number(b[1]*Math.pow(1024,3));break;case "TB":c=Number(b[1]*Math.pow(1024,4));break;case "PB":c=Number(b[1]*Math.pow(1024,5))}c=Math.floor(c/1024)}return c};this.applyValue=function(a,d){a[c.column.field]=d};this.isValueChanged=function(){return""!=a.val()&&void 0!=a.val()};this.validate=
function(){if(c.column.validator){var b=c.column.validator(a.val());if(!b.valid)return b}return{valid:!0,msg:null}};this.init()},SelectOptionEditor:function(c){var a=null,b;this.options=null;this.init=function(){if(void 0!=c.column.seloptions.options)this.options=c.column.seloptions.options,config=c.column.seloptions,a=e('\x3cdiv style\x3d"width:100%;"\x3e'),a.appendTo(c.container),e(c.container).css({height:"auto"}),sel2config={multiple:config.multiple,placeholder:config.txt,formatResult:function(a){return a[config.displayField]},
formatSelection:function(a){return a[config.displayField]},id:function(a){return a[config.valueField]},minimumInputLength:0},sel2config.data=this.options,e(a).select2(sel2config);else{var d=c.column.seloptions.txt;a=e('\x3cdiv style\x3d"width:100%;"\x3e');a.appendTo(c.container);e(c.container).css({height:"auto"});var f=c.column.seloptions.displayName;e(a).select2({multiple:!0,placeholder:d,displayValue:f,minimumInputLength:1,initSelection:function(b,c){var d=a.select2("val");c(d)},ajax:{url:c.column.seloptions.url,
dataType:"json",quietMillis:100,data:function(a,b){return{q:a,page_limit:10,page:b}},results:function(a,b){return{results:a.results,more:10*b<a.total}}},formatResult:function(a){return a[this.displayValue]},formatSelection:function(a){return a[this.displayValue]},id:function(a){return a.id}})}this.destroy=function(){e(a).select2("destroy");a.remove();e(c.container).css("height","")};this.focus=function(){a.focus()};this.loadValue=function(d){e(a).select2("data",d[c.column.field]);b=d[c.column.field][c.column.seloptions.valueField]};
this.serializeValue=function(){return serializedvalue=a.select2("data")};this.applyValue=function(a,b){a[c.column.field]=b};this.isValueChanged=function(){return e(a).select2("val")!=b};this.validate=function(){return{valid:!0,msg:null}}};this.init()}}});h.DefaultDecimalPlaces=null;return g.Editors});