+function(b,g){"function"===typeof define&&define.amd?define(["jquery","../slick.core"],g):(b.Slick.Plugins=b.Slick.Plugins||{},b.Slick.Plugins.HeaderMenu=g(b.jQuery,b.Slick))}(this,function(b,g){return function(e){function l(k){a&&a[0]!=k.target&&!b.contains(a[0],k.target)&&q()}function q(){a&&(a.remove(),a=null,p.removeClass("slick-header-column-active"))}function t(k,d){var c=d.column,a=c.header&&c.header.menu;a&&(c=b("\x3cdiv\x3e\x3c/div\x3e").addClass("slick-header-menubutton").data("column",
c).data("menu",a),e.buttonCssClass&&c.addClass(e.buttonCssClass),e.buttonImage&&c.css("background-image","url("+e.buttonImage+")"),a.tooltip&&c.attr("title",a.tooltip),c.bind("click",u).appendTo(d.node))}function v(a,d){var c=d.column;c.header&&c.header.menu&&b(d.node).find(".slick-header-menubutton").remove()}function u(k){var d=b(this),c=d.data("menu"),g=d.data("column");if(0!=m.onBeforeMenuShow.notify({grid:h,column:g,menu:c},k,m)){a||(a=b("\x3cdiv class\x3d'slick-header-menu'\x3e\x3c/div\x3e").appendTo(h.getContainerNode()));
a.empty();for(var e=0;e<c.items.length;e++){var f=c.items[e],n=b("\x3cdiv class\x3d'slick-header-menuitem'\x3e\x3c/div\x3e").data("command",f.command||"").data("column",g).data("item",f).bind("click",w).appendTo(a);f.disabled&&n.addClass("slick-header-menuitem-disabled");f.tooltip&&n.attr("title",f.tooltip);var l=b("\x3cdiv class\x3d'slick-header-menuicon'\x3e\x3c/div\x3e").appendTo(n);f.iconCssClass&&l.addClass(f.iconCssClass);f.iconImage&&l.css("background-image","url("+f.iconImage+")");b("\x3cspan class\x3d'slick-header-menucontent'\x3e\x3c/span\x3e").text(f.title).appendTo(n)}a.position({my:"left top",
at:"left bottom",of:b(this)});a.offset({top:d.offset().top+d.height(),left:leftPos});p=d.closest(".slick-header-column");p.addClass("slick-header-column-active");k.preventDefault();k.stopPropagation()}}function w(a){var d=b(this).data("command"),c=b(this).data("column"),e=b(this).data("item");e.disabled||(q(),null!=d&&""!=d&&m.onCommand.notify({grid:h,column:c,command:d,item:e},a,m),a.preventDefault(),a.stopPropagation())}var h,m=this,r=new g.EventHandler,x={buttonCssClass:null,buttonImage:null},
a,p;b.extend(this,{init:function(a){e=b.extend(!0,{},x,e);h=a;r.subscribe(h.onHeaderCellRendered,t).subscribe(h.onBeforeHeaderCellDestroy,v);h.setColumns(h.getColumns());b(document.body).bind("mousedown",l)},destroy:function(){r.unsubscribeAll();b(document.body).unbind("mousedown",l)},onBeforeMenuShow:new g.Event,onCommand:new g.Event})}});