(function(h,f){"function"===typeof define&&define.amd?define(["jquery","../slick.core"],f):h.Slick.RowSelectionModel=f(h.jQuery,h.Slick)})(this,function(h,f){return function(u){function m(a){return function(){n||(n=!0,a.apply(this,arguments),n=!1)}}function q(a){for(var c=[],b=0;b<a.length;b++)for(var d=a[b].fromRow;d<=a[b].toRow;d++)c.push(d);return c}function p(a){for(var c=[],b=e.getColumns().length-1,d=0;d<a.length;d++)c.push(new f.Range(a[d],0,a[d],b));return c}function v(a,c){var b,d=[];for(b=
a;b<=c;b++)d.push(b);for(b=c;b<a;b++)d.push(b);return d}function r(){return q(g)}function l(a){if(g&&0!==g.length||a&&0!==a.length)g=a,w.onSelectedRangesChanged.notify(g)}function x(a,c){t.selectActiveRow&&null!=c.row&&l([new f.Range(c.row,0,c.row,e.getColumns().length-1)])}function y(a){var c=e.getActiveCell();if(c&&a.shiftKey&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&(38==a.which||40==a.which)){var b=r();b.sort(function(a,b){return a-b});b.length||(b=[c.row]);var d=b[0],b=b[b.length-1],c=40==a.which?
c.row<b||d==b?++b:++d:c.row<b?--b:--d;0<=c&&c<e.getDataLength()&&(e.scrollRowIntoView(c),g=p(v(d,b)),l(g));a.preventDefault();a.stopPropagation()}}function z(a){var c=e.getCellFromEvent(a);if(!(c&&e.canCellBeActive(c.row,c.cell)&&e.getOptions().multiSelect&&(a.ctrlKey||a.shiftKey||a.metaKey)))return!1;var b=q(g),d=h.inArray(c.row,b);if(-1===d&&(a.ctrlKey||a.metaKey))b.push(c.row),e.setActiveCell(c.row,c.cell);else if(-1!==d&&(a.ctrlKey||a.metaKey))b=h.grep(b,function(a,b){return a!==c.row}),e.setActiveCell(c.row,
c.cell);else if(b.length&&a.shiftKey){for(var d=b.pop(),f=Math.min(c.row,d),k=Math.max(c.row,d),b=[];f<=k;f++)f!==d&&b.push(f);b.push(d);e.setActiveCell(c.row,c.cell)}g=p(b);l(g);a.stopImmediatePropagation();return!0}var e,g=[],w=this,k=new f.EventHandler,n,t,A={selectActiveRow:!0};h.extend(this,{getSelectedRows:r,setSelectedRows:function(a){l(p(a))},getSelectedRanges:function(){return g},setSelectedRanges:l,init:function(a){t=h.extend(!0,{},A,u);e=a;k.subscribe(e.onActiveCellChanged,m(x));k.subscribe(e.onKeyDown,
m(y));k.subscribe(e.onClick,m(z))},destroy:function(){k.unsubscribeAll()},onSelectedRangesChanged:new f.Event})}});